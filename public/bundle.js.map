{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/dayjs/dayjs.min.js","webpack:///./node_modules/nanoid/index.browser.js","webpack:///./node_modules/nanoid/url-alphabet/index.js","webpack:///./src/consts.js","webpack:///./src/main.js","webpack:///./src/mock/comments-data.js","webpack:///./src/mock/movie-data.js","webpack:///./src/presenters/movie-presenter.js","webpack:///./src/presenters/movies-list-presenter.js","webpack:///./src/utils/common.js","webpack:///./src/utils/const.js","webpack:///./src/utils/most-films-list.js","webpack:///./src/utils/render.js","webpack:///./src/view/abstract-view.js","webpack:///./src/view/button-show-more.js","webpack:///./src/view/empty-list.js","webpack:///./src/view/film-card.js","webpack:///./src/view/film-section.js","webpack:///./src/view/films-list-container.js","webpack:///./src/view/films-list-most-commented.js","webpack:///./src/view/films-list-top-rated.js","webpack:///./src/view/films-list.js","webpack:///./src/view/menu.js","webpack:///./src/view/popup.js","webpack:///./src/view/smart-view.js","webpack:///./src/view/sort.js","webpack:///./src/view/user.js"],"names":[],"mappings":"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ACA,gBAAgB,2EAAkB;AAClC,wBAAwB,2EAAkB;AAC1C;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA,kBAAkB,gFAAuB;AACzC;AACA;AACA;AACA;AACA,YAAY,4CAAK,YAAY,2EAAkB;AAC/C;AACA,KAAK;AACL,2BAA2B,2EAAkB;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEe,8EAAe,E;;;;;;;;;;;;ACzH9B;AAAA;AAAA;AAAA;AAAA;AAAyC;AACP;AACuB;AACjB;AACxC;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,yBAAyB,uDAAQ;AACjC,sBAAsB,mDAAK;;AAE3B;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,MAAM,4DAAM;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK,6DAAO;AACZ,KAAK,4DAAM;AACX;AACA;AACA,MAAM,6DAAO;AACb,MAAM,6DAAO;;AAEb;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,gBAAgB,sCAAsC;AAC5E;AACA;AACA;AACA;AACA;AACA,sBAAsB,gBAAgB,iDAAiD;AACvF;AACA;AACA;AACA;AACA;AACA,sBAAsB,gBAAgB,oCAAoC;AAC1E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,4DAAM;AACV,IAAI,4DAAM;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACnJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoC;AACW;AACc;AACf;AACG;AACN;AACc;AACA;AACV;AACc;AACU;AACL;AACxB;AAC1C;AACA;AACe;AACf;AACA;AACA,qBAAqB,sDAAQ;AAC7B;AACA;AACA,8BAA8B,kDAAQ;AACtC,sCAAsC,0DAAW,G;AACjD,mCAAmC,wDAAS;AAC5C,mCAAmC,wDAAY;AAC/C,4CAA4C,kEAAiB;AAC7D;AACA,kCAAkC,kEAAiB;AACnD,2CAA2C,kEAAiB;AAC5D,uCAAuC,wEAAsB;AAC7D,+CAA+C,kEAAiB;AAChE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,sDAAQ;AACnB;AACA;AACA,WAAW,sDAAQ;AACnB,0BAA0B,uDAAQ;AAClC;AACA,WAAW,sDAAQ;AACnB,0BAA0B,yDAAU;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,4DAAM;AACV;AACA;;AAEA;AACA;AACA,mBAAmB,iEAAU;AAC7B,0BAA0B,iEAAU;AACpC;AACA;AACA;;AAEA;AACA,+BAA+B,wDAAc;AAC7C;AACA;AACA;;AAEA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA,0CAA0C,iEAAc;AACxD;AACA,MAAM,4DAAM;AACZ;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,IAAI,4DAAM,gC;AACV;AACA;;AAEA;AACA,IAAI,4DAAM;AACV;AACA,MAAM,4DAAM;AACZ,KAAK;AACL,MAAM,4DAAM;AACZ,MAAM,4DAAM;;AAEZ;AACA;;AAEA;AACA,IAAI,4DAAM;AACV,IAAI,4DAAM;AACV,IAAI,4DAAM;AACV,IAAI,4DAAM;;AAEV,kBAAkB,iBAAiB;AACnC,gCAAgC,wDAAc;AAC9C,yBAAyB,4EAAa;AACtC,qCAAqC,wDAAc;AACnD,8BAA8B,4EAAa;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4DAAM;AACV;AACA,C;;;;;;;;;;;;ACvJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,6BAA6B,KAAQ;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,OAAO,4CAAK;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAO;AACP;AACA;AACA;AACA,C;;;;;;;;;;;;ACJA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiD;AAChB;;;AAGjC;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,2DAAY;AACrC;AACA;AACA,0BAA0B,2DAAY;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2DAAY;AACzC;AACA;AACA,8BAA8B,2DAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,2DAAY;AACxC;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAgD;;AAEjC;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mEAAa;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAA2C;AACM;AACjD;AACA;AACA;AACA;AACA;;AAEe,6BAA6B,sDAAY;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAA2C;;AAE3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,wBAAwB,sDAAY;AACnD;AACA;AACA;AACA,C;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACiB;;AAE3C;AACA,SAAS,4EAA4E;AACrF;AACA,sBAAsB,4CAAK;AAC3B;AACA;AACA;AACA,qCAAqC,MAAM;AAC3C,qCAAqC,aAAa;AAClD;AACA,wCAAwC,YAAY;AACpD,4CAA4C,QAAQ;AACpD,yCAAyC,MAAM;AAC/C;AACA,kBAAkB,OAAO,SAAS,MAAM;AACxC,0CAA0C,YAAY;AACtD,uCAAuC,eAAe;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,uBAAuB,sDAAY;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oC;AACA;AACA;AACA;;AAEA,iC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC1GA;AAAA;AAAA;AAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;;AAEe,0BAA0B,sDAAY;AACrD;AACA;AACA;AACA,C;;;;;;;;;;;;ACbA;AAAA;AAAA;AAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;;AAEe,gCAAgC,sDAAY;AAC3D;AACA;AACA;AACA,C;;;;;;;;;;;;ACbA;AAAA;AAAA;AAA2C;;AAE3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,qCAAqC,sDAAY;;AAEhE;AACA;AACA;AACA,C;;;;;;;;;;;;AChBA;AAAA;AAAA;AAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,gCAAgC,sDAAY;AAC3D;AACA;AACA;AACA,C;;;;;;;;;;;;ACdA;AAAA;AAAA;AAA2C;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,uBAAuB,sDAAY;AAClD;AACA;AACA;AACA,C;;;;;;;;;;;;ACdA;AAAA;AAAA;AAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6GAA6G,cAAc;AAC3H;AACA;AACA;AACA;AACA;;AAEe,mBAAmB,sDAAY;;AAE9C;AACA;AACA;;AAEA,C;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACiB;AACN;AACrC;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D;AACA;AACA;AACA,4CAA4C,UAAU;AACtD;;AAEA;AACA;AACA;AACA,+BAA+B,+BAA+B;AAC9D;AACA;AACA,iCAAiC,QAAQ,0CAA0C,QAAQ;AAC3F;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA,qDAAqD,OAAO;AAC5D,kDAAkD,4CAAK,kCAAkC;AACzF;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,SAAS,uIAAuI;;AAEhJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2DAA2D,OAAO;AAClE,6CAA6C,WAAW;AACxD;;AAEA;AACA;AACA;AACA,oDAAoD,MAAM;AAC1D,sEAAsE,kBAAkB;AACxF;;AAEA;AACA,0DAA0D,aAAa;AACvE;AACA;;AAEA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA,mDAAmD,mBAAmB;AACtE;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA;AACA,mDAAmD,oCAAoC;AACvF;AACA;AACA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4GAA4G,wBAAwB;;AAEpI;AACA,eAAe;;AAEf;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,oBAAoB,mDAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0CAA0C,kDAAkD;AAC5F;AACA,kCAAkC,iBAAiB,0CAA0C,iBAAiB;AAC9G;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,oC;AACA;AACA;AACA;AACA,iC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC9PA;AAAA;AAAA;AAA2C;;AAE5B,wBAAwB,sDAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAA2C;AACD;AAC1C;AACA;AACA;AACA,gFAAgF,qDAAQ,SAAS;AACjG,2DAA2D,qDAAQ,SAAS;AAC5E,2DAA2D,qDAAQ,WAAW;AAC9E;AACA;AACA;;AAEe,uBAAuB,sDAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,mBAAmB,sDAAY;AAC9C;AACA;AACA;AACA,C","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=v;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),l=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?l(1,0):l(31,11);case f:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,l=this;r=Number(r);var $=O.p(h),y=function(t){var e=w(l);return O.w(e.date(e.date()+Math.round(t*r)),l)};if($===f)return this.set(f,this.$M+r);if($===c)return this.set(c,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||$[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,v=this-M,g=O.m(this,M);return g=($={},$[c]=g/12,$[f]=g,$[h]=g/3,$[o]=(v-m)/6048e5,$[a]=(v-m)/864e5,$[u]=v/n,$[s]=v/e,$[i]=v/t,$)[y]||v,l?g:O.a(g)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[g],w.Ls=D,w.p={},w}));","export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n","\r\nconst movieTitles = ['Santa Claus Conquers the Martians','Made for Each Other','The Great Flamarion', 'The Man with the Golden Arm', 'Popeye Meets Sinbad', 'Sagebrush Trail'];\r\n\r\nconst PossibleDescriptions = [\r\n  'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\r\n  'Cras aliquet varius magna, non porta ligula feugiat eget.',\r\n  'Fusce tristique felis at fermentum pharetra.',\r\n  'Aliquam id orci ut lectus varius viverra.',\r\n  'Nullam nunc ex, convallis sed finibus eget, sollicitudin eget ante.',\r\n  'Phasellus eros mauris, condimentum sed nibh vitae, sodales efficitur ipsum.',\r\n  'Sed blandit, eros vel aliquam faucibus, purus ex euismod diam, eu luctus nunc ante ut dui.',\r\n  'Sed sed nisi sed augue convallis suscipit in sed felis.',\r\n  'Aliquam erat volutpat.',\r\n  'Nunc fermentum tortor ac porta dapibus.',\r\n  'In rutrum ac purus sit amet tempus.',\r\n];\r\n\r\n\r\nexport {movieTitles, PossibleDescriptions}; ","import MenuView from \"./view/menu.js\";\r\nimport UserView from \"./view/user.js\";\r\nimport createMovieData from \"./mock/movie-data.js\";\r\nimport { render, RenderPosition} from \"./utils/render.js\";\r\nimport MovieListPresenter from \"./presenters/movies-list-presenter.js\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\nconst createIdList = ()=>{\r\n  const FILMS_NUMBER = 20;\r\n  const idList = [];\r\n  for(let i = 0; i<FILMS_NUMBER;i++){\r\n    idList.push(nanoid());\r\n  }\r\n  return idList;\r\n}\r\nconst IDs = createIdList();\r\n\r\nconst movies = IDs.map((id)=>createMovieData(id));\r\nconsole.log(movies);\r\nconst header = document.querySelector('.header');\r\nconst main = document.querySelector('.main');\r\nrender(header, new UserView(), RenderPosition.BEFOREEND);\r\nrender(main, new MenuView(), RenderPosition.BEFOREEND);\r\n\r\nconst movieListPresenter = new MovieListPresenter(main);\r\nmovieListPresenter.init(movies);\r\n\r\n\r\n\r\n","import dayjs from 'dayjs';\r\nimport {PossibleDescriptions} from '../consts.js';\r\nimport {  createRandomNumber} from '../utils/common.js';\r\n\r\nconst COMMENTS_NUMBER = 5;\r\nconst Emotions = [\"smile\", \"sleeping\", \"puke\", \"angry\"];\r\nconst Authors =  [\"John Doe\", \"Julia\", \"Alexey\", \"Maksim\"];\r\n\r\nconst createCommentText = ()=>{\r\n  let text = '';\r\n  for (let i = 0; i < createRandomNumber(0, PossibleDescriptions.length - 1); i++) {\r\n    text += PossibleDescriptions[createRandomNumber(0, PossibleDescriptions.length - 1)];\r\n  }\r\n  return text;\r\n};\r\n\r\nconst createComment = ()=>{\r\n  const comment ={\r\n    \r\n    author: Authors[createRandomNumber(0, Authors.length - 1)],\r\n    comment: createCommentText(),\r\n    emotion:Emotions[createRandomNumber(0, Emotions.length - 1)],\r\n    date: dayjs().subtract(createRandomNumber(0, 10),'day')\r\n  };\r\nreturn comment;\r\n};\r\n\r\nconst createComments = (id) => {\r\n  const comments = {};\r\n  comments.comment = [];\r\n  comments.id = id;\r\n  for (let i = 0; i < createRandomNumber(1, COMMENTS_NUMBER); i++) {\r\n    comments.comment.push(createComment());\r\n  }\r\n  return comments;\r\n};\r\n\r\nexport default createComments;","import {\r\n  movieTitles, PossibleDescriptions, createIdList\r\n} from \"../consts\";\r\nimport dayjs from \"dayjs\";\r\nimport {\r\n  createRandomNumber,\r\n  createFloatRandomNumber\r\n} from \"../utils/common.js\";\r\nimport createComments from \"./comments-data.js\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\n\r\n\r\nconst Genres = [\r\n  'Drama', 'Comedy', 'Western', 'Fantesy', 'Musical', 'Cartoon'\r\n];\r\n\r\nconst alternativeTitles = ['Hello', 'Computer', 'Lamp'];\r\n\r\nconst directors = ['Tom Ford', 'Tom Hardy', 'Limon'];\r\n\r\nconst Writers = ['Tom Ford', 'Tom Hardy', 'Limon'];\r\n\r\nconst Actors = ['Tom Ford', 'Tom Hardy', 'Limon'];\r\n\r\nconst Countries = ['USA', 'Russia','France', 'China'];\r\n\r\n// const createCommentsIds = (comments)=>{\r\n//   const commentsIds = comments.map(({id})=> id);\r\n//   return commentsIds;\r\n// };\r\n\r\nconst createCountry = ()=>{\r\n  const country = Countries[createRandomNumber(0, Countries.length - 1)];\r\n  return country;\r\n};\r\n\r\nconst createActors = () => {\r\n  const actors = [];\r\n  for (let i = 0; i <= createRandomNumber(1, Actors.length - 1); i++) {\r\n    actors.push(Actors[i]);\r\n  }\r\n  return actors;\r\n};\r\n\r\nconst createWriters = () => {\r\n  const writers = [];\r\n  for (let i = 0; i <= createRandomNumber(0, Writers.length - 1); i++) {\r\n    writers.push(Writers[i]);\r\n  }\r\n  return writers;\r\n};\r\n\r\nconst createAlternativeTitle = () => {\r\n  const alternativeTitle = alternativeTitles[createRandomNumber(0, alternativeTitles.length - 1)];\r\n  return alternativeTitle;\r\n};\r\n\r\nconst createGenre = () => {\r\n  const genresSet = new Set();\r\n   for (let i = 1; i <=createRandomNumber(2, Genres.length - 1); i++) {\r\n    genresSet.add(Genres[createRandomNumber(0, Genres.length - 1)]);\r\n   }\r\n  const genres = Array.from(genresSet);\r\n  return genres;\r\n};\r\n\r\nconst createDescription = (text) => {\r\n  let description = '';\r\n  for (let i = 0; i < createRandomNumber(0, PossibleDescriptions.length - 1); i++) {\r\n    description += PossibleDescriptions[createRandomNumber(0, PossibleDescriptions.length - 1)];\r\n  }\r\n  return description;\r\n};\r\n\r\nconst createPoster = (title) => {\r\n  const poster = title.toLowerCase().split(' ').join('-');\r\n  return poster;\r\n};\r\n\r\nconst createRuntime = (time) => {\r\n  const hours = Math.floor(time / 60);\r\n  const minutes = time < 60 ? time + 'm' : time % 60 + 'm';\r\n  return hours > 0 ? hours + 'h ' + minutes : minutes;\r\n};\r\n\r\nconst createMovieData = (id) => {\r\n  const title = movieTitles[createRandomNumber(0, movieTitles.length - 1)];\r\n\r\n  const movieData = {\r\n    id:id,\r\n    comments:createComments(id),\r\n    title:title,\r\n    age_rating: createRandomNumber(0, 18),\r\n    director: directors[createRandomNumber(0, directors.length - 1)],\r\n    alternative_title: createAlternativeTitle(),\r\n    poster: `./images/posters/${createPoster(title)}.jpg`,\r\n    genres: createGenre(),\r\n    writers: createWriters(),\r\n    actors: createActors(),\r\n    description: createDescription(),\r\n    total_rating: createFloatRandomNumber(0, 10),\r\n    isFavorite:false,\r\n    already_watched: false,\r\n    watchlist: false,\r\n    release: {\r\n      date: dayjs().subtract(createRandomNumber(0, 10), 'year'),\r\n      country:createCountry()\r\n    },\r\n    runtime: createRuntime(createRandomNumber(40, 200)),\r\n    user_details: {\r\n      watchlist: false,\r\n      already_watched: true,\r\n      \r\n      isFavorite: false,\r\n    }\r\n  };\r\n  return movieData;\r\n\r\n};\r\n\r\nexport default createMovieData;","import FilmCard from \"../view/film-card\";\r\nimport Popup from \"../view/popup\";\r\nimport { remove, render,replace } from \"../utils/render\";\r\nimport { isEsc } from \"../utils/render\";\r\nconst Mode = {\r\n  DEFAULT: 'DEFAULT',\r\n  POPUP: 'POPUP',\r\n};\r\nexport default class MoviePresenter{\r\n  constructor(container, changeMovieData, changeMode){\r\n    this._filmCard = null;\r\n    this._popup = null;\r\n    this._changeMode = changeMode;\r\n    this._mode = Mode.DEFAULT;\r\n    this._body = document.querySelector('body');\r\n    this._movieListContainer = container;\r\n    this._openPopup = this._openPopup.bind(this);\r\n    this._removePopup = this._removePopup.bind(this);\r\n    this._onEscPressDownClosePopup = this._onEscPressDownClosePopup.bind(this);\r\n    this._changeMovieData = changeMovieData;\r\n    this._changeFavoriteStatus = this._changeFavoriteStatus.bind(this);\r\n    this._changeWatchedStatus = this._changeWatchedStatus.bind(this);\r\n    this._addToWatchList = this._addToWatchList.bind(this);\r\n  } ;\r\n\r\n  init(movie){\r\n    this._movie = movie;\r\n\r\n    const prevMovieComponent = this._filmCard;\r\n    const prevPopup = this._popup;\r\n    this._filmCard = new FilmCard(movie);\r\n    this._popup = new Popup(movie);\r\n\r\n    this._popup.setClickPopup(this._removePopup);\r\n    \r\n    this._popup.setAddToWatchListHandler(this._addToWatchList);\r\n    this._popup.setAddToFavoriteHandler(this._changeFavoriteStatus);\r\n    this._popup.setMarkAsWatchHandler(this._changeWatchedStatus);\r\n    \r\n   \r\n    this._filmCard.setClickListener(this._openPopup);\r\n    this._filmCard.setAddToFavoriteHandler(this._changeFavoriteStatus);\r\n    this._filmCard.setMarkAsWatchHandler(this._changeWatchedStatus);\r\n    this._filmCard.setAddToWatchListHandler(this._addToWatchList);\r\n   \r\n    if(prevMovieComponent ===null|| prevPopup === null){\r\n      render(this._movieListContainer, this._filmCard);\r\n      return;\r\n    }\r\n \r\n    if(this._mode === Mode.DEFAULT){\r\n      // console.log(prevMovieComponent);\r\n      // console.log(this._filmCard);\r\n      // console.log(movie);\r\n     replace(this._filmCard, prevMovieComponent);\r\n     remove(prevMovieComponent);\r\n    }\r\n    if(this._mode === Mode.POPUP){\r\n      replace(this._popup, prevPopup);\r\n      replace(this._filmCard, prevMovieComponent);\r\n\r\n     }\r\n    \r\n    //remove(prevPopup);\r\n  };\r\n  resetView(){\r\n    \r\n    if(this._mode !==Mode.DEFAULT){\r\n   \r\n      this._popup.getElement().remove();\r\n    }\r\n  };\r\n\r\n  _changeFavoriteStatus() {\r\n    this._changeMovieData(\r\n      Object.assign({}, this._movie, { isFavorite: !this._movie.isFavorite }),\r\n    );\r\n   this._checkingStatus();\r\n  }\r\n  _changeWatchedStatus() {\r\n    this._changeMovieData(\r\n      Object.assign({}, this._movie, { already_watched : !this._movie.already_watched }),\r\n    );\r\n this._checkingStatus();\r\n  }\r\n  _addToWatchList() {\r\n    this._changeMovieData(\r\n      Object.assign({}, this._movie, { watchlist: !this._movie.watchlist }),\r\n    );\r\n    this._checkingStatus();\r\n    \r\n  }\r\n  _removePopup(evt){\r\n    //evt.preventDefault();\r\n   //remove(this._popup);\r\n  this._popup.getElement().remove();\r\n   //document.querySelector('body').removeChild(this._popup.getElement());\r\n    document.querySelector('body').classList.remove('hide-overflow');\r\n    document.removeEventListener('keydown', this._onEscPressDownClosePopup);\r\n    this._mode = Mode.DEFAULT;\r\n  };\r\n\r\n  _onEscPressDownClosePopup(evt){\r\n    if(evt.key === 'Escape' || evt.key === 'Esc'){\r\n      evt.preventDefault();\r\n      this._removePopup();\r\n    }\r\n  };\r\n\r\n  destroy(){\r\n    remove(this._filmCard);\r\n    remove(this._popup);\r\n  }\r\n  _openPopup(){\r\n     this._body.appendChild(this._popup.getElement());\r\n    this._body.classList.add('hide-overflow');\r\n    document.addEventListener('keydown', this._onEscPressDownClosePopup);\r\n    this._changeMode();\r\n    this._mode = Mode.POPUP;\r\n  };\r\n\r\n_checkingStatus(){\r\n  \r\n  if(this._movie.watchlist){\r\n    console.log(this._movie);\r\n    console.log(this._movie.watchlist);\r\n    this._filmCard.getElement().querySelector('.film-card__controls-item--add-to-watchlist').classList.add('film-card__controls-item--active');\r\n    this._popup.getElement().querySelector('.film-details__control-button--watchlist').classList.add('film-details__control-button--active');\r\n  }else{\r\n    this._filmCard.getElement().querySelector('.film-card__controls-item--add-to-watchlist').classList.remove('film-card__controls-item--active');\r\n    this._popup.getElement().querySelector('.film-details__control-button--watchlist').classList.remove('film-details__control-button--active');\r\n  }\r\n  if(this._movie.already_watched){\r\n    this._filmCard.getElement().querySelector('.film-card__controls-item--mark-as-watched').classList.add('film-card__controls-item--active');\r\n    this._popup.getElement().querySelector('.film-details__control-button--watched').classList.add('film-details__control-button--active');\r\n  }else{\r\n    this._filmCard.getElement().querySelector('.film-card__controls-item--mark-as-watched').classList.remove('film-card__controls-item--active');\r\n    this._popup.getElement().querySelector('.film-details__control-button--watched').classList.remove('film-details__control-button--active');\r\n  }\r\n  if(this._movie.isFavorite){\r\n    this._filmCard.getElement().querySelector('.film-card__controls-item--favorite').classList.add('film-card__controls-item--active');\r\n    this._popup.getElement().querySelector('.film-details__control-button--favorite').classList.add('film-details__control-button--active');\r\n  }else{\r\n    this._filmCard.getElement().querySelector('.film-card__controls-item--favorite').classList.remove('film-card__controls-item--active');\r\n    this._popup.getElement().querySelector('.film-details__control-button--favorite').classList.remove('film-details__control-button--active');\r\n  }\r\n}\r\n}","import SortView from \"../view/sort\";\r\nimport FilmSection from \"../view/film-section\";\r\nimport FilmListContainer from \"../view/films-list-container\";\r\nimport FilmListView from \"../view/films-list\";\r\nimport { render, remove } from \"../utils/render\";\r\nimport EmptyList from \"../view/empty-list\";\r\nimport { findMostFilms } from \"../utils/most-films-list\";\r\nimport ButtonShowMore from \"../view/button-show-more.js\";\r\nimport MoviePresenter from \"./movie-presenter\";\r\nimport TopRatedFilmsList from \"../view/films-list-top-rated\";\r\nimport MostCommentedFilmsList from \"../view/films-list-most-commented\";\r\nimport { updateItem, sortDate, sortRating} from \"../utils/common\";\r\nimport { SortType } from \"../utils/const\";\r\nconst FILMS_STEP = 5;\r\nconst MOST_MOVIES = 2;\r\nexport default class MovieListPresenter {\r\n  constructor(mainContainer){\r\n    this._moviePresenter = {};\r\n    this._sortType = SortType.DEFAULT;\r\n    this._renderedFilms = FILMS_STEP;\r\n    this._mainContainer = mainContainer;\r\n    this._sortComponent = new SortView();\r\n    this._filmsSectionComponent = new FilmSection(); \r\n    this._emptyListComponent = new EmptyList();\r\n    this._filmsListComponent = new FilmListView();\r\n    this._filmsListContainerComponent = new FilmListContainer();\r\n    this._showMoreButtonComponent = null;\r\n    this._topRatedFilmsList = new TopRatedFilmsList();\r\n    this._topRatedFilmsListContainer = new FilmListContainer();\r\n    this._mostCommentedFilmsList = new MostCommentedFilmsList();\r\n    this._mostommentedFilmsListContainer = new FilmListContainer();\r\n    this._renderMoreFilmsCards = this._renderMoreFilmsCards.bind(this);\r\n    this._updateFilmCardData = this._updateFilmCardData.bind(this);\r\n    this._changeMode = this._changeMode.bind(this);\r\n    this._sortTypeHandler = this._sortTypeHandler.bind(this);\r\n   \r\n  }\r\n  init(movies){\r\n    this._movies = movies.slice();\r\n    this._updatedMovies = movies.slice();\r\n    this._renderSortComponent();\r\n    this._renderFilmsSection();\r\n    this._renderFilmsCards();\r\n   this._renderMostMovies();\r\n  }\r\n\r\n  _changeMode(){\r\n    Object.values(this._moviePresenter).forEach((presenter)=>presenter.resetView());\r\n  }\r\n\r\n  _sortTypeHandler(sortType){\r\n    if(this._sortType === sortType){\r\n      return;\r\n    }\r\n    this._sortMovies(sortType);\r\n    this._clearMovieList();\r\n    this._renderFilmsCards();\r\n  }\r\n  _sortMovies(sortType){\r\n    switch(sortType){\r\n      case SortType.DEFAULT:\r\n        this._movies = this._updatedMovies.slice();\r\n        break;\r\n      case SortType.BY_DATE:\r\n        this._movies.sort(sortDate);\r\n        break;\r\n      case SortType.BY_RATING:\r\n        this._movies.sort(sortRating);\r\n        break;\r\n      default:\r\n        \"there is no other type\"\r\n    }\r\n    this._sortType = sortType;\r\n  }\r\n\r\n  _renderSortComponent(){\r\n    render(this._mainContainer, this._sortComponent);\r\n    this._sortComponent.setHandleSortType(this._sortTypeHandler);\r\n  };\r\n\r\n  _updateFilmCardData(updatedMovie){\r\n   // console.log(this._movies.find((prevMovie)=>prevMovie.id===updatedMovie.id))\r\n    this._movies = updateItem(this._movies, updatedMovie);\r\n    this._updatedMovies = updateItem(this._updatedMovies, updatedMovie);\r\n//console.log(updatedMovie);\r\n    this._moviePresenter[updatedMovie.id].init(updatedMovie);\r\n  }\r\n\r\n  _renderFilmCard(movie){\r\n    const moviePresenter = new MoviePresenter(this._filmsListContainerComponent, this._updateFilmCardData,this._changeMode);\r\n    moviePresenter.init(movie);\r\n    this._moviePresenter[movie.id] = moviePresenter;\r\n  }\r\n\r\n  _renderFilmsCards(){\r\n    for (let i = 0; i < FILMS_STEP; i++) {\r\n      this._renderFilmCard(this._movies[i]);\r\n    };\r\n    if (this._movies.length > FILMS_STEP) {\r\n      this._showMoreButtonComponent = new ButtonShowMore();\r\n      //console.log(this._showMoreButtonComponent);\r\n      render(this._filmsListContainerComponent, this._showMoreButtonComponent);\r\n      this._showMoreButtonComponent.setClickListener(this._renderMoreFilmsCards);\r\n     \r\n    }\r\n   \r\n  }\r\n\r\n  _renderMoreFilmsCards(){\r\n    this._movies.slice(this._renderedFilms, this._renderedFilms + FILMS_STEP).forEach((film) => {\r\n      this._renderFilmCard(film);\r\n    });\r\n\r\n    this._renderedFilms += FILMS_STEP;\r\n    if (this._renderedFilms >= this._movies.length ) {\r\n    remove(this._showMoreButtonComponent);    \r\n    }\r\n  }\r\n\r\n  _renderFilmsSection(){\r\n    render(this._mainContainer, this._filmsSectionComponent);\r\n    if(this._movies.length===0){\r\n      render(this._filmsSectionComponent, this._emptyListComponent);\r\n    }else{\r\n      render(this._filmsSectionComponent, this._filmsListComponent);\r\n      render(this._filmsSectionComponent, this._filmsListContainerComponent);\r\n \r\n    }\r\n  };\r\n\r\n  _renderMostMovies(){\r\n    render(this._filmsSectionComponent, this._topRatedFilmsList);\r\n    render(this._topRatedFilmsList, this._topRatedFilmsListContainer);\r\n    render(this._filmsSectionComponent, this._mostCommentedFilmsList);\r\n    render(this._mostCommentedFilmsList, this._mostommentedFilmsListContainer);\r\n\r\n    for(let i = 0; i < MOST_MOVIES; i++){\r\n      const topRatedMovie = new MoviePresenter(this._topRatedFilmsListContainer);\r\n      topRatedMovie.init(findMostFilms(this._movies, 'TopRatedFilmsList')[i]);\r\n      const mostCommentedMovie = new MoviePresenter(this._mostommentedFilmsListContainer);\r\n      mostCommentedMovie.init(findMostFilms(this._movies, 'MostCommentedFilmsList')[i]);\r\n    }\r\n  }\r\n  _clearMovieList() {\r\n    Object\r\n      .values(this._moviePresenter)\r\n      .forEach((presenter) => presenter.destroy());\r\n      this._moviePresenter = {};\r\n    this._renderedFilms = FILMS_STEP;\r\n    remove(this._showMoreButtonComponent);\r\n  }\r\n}","import dayjs from \"dayjs\";\r\nconst createRandomNumber = (min = 0, max = 10) => {\r\n  const rundomNumber = Math.floor(Math.random() * (max - min + 1)) + min;\r\n  return rundomNumber;\r\n};\r\n\r\nconst createFloatRandomNumber = (min, max)=>{\r\n  return (Math.random() * (max - min) + min).toFixed(2);\r\n \r\n};\r\n\r\nconst isEsc = (evt)=>{\r\n  return evt.key === ('Esc'||'Escape');\r\n};\r\n\r\nconst updateItem = (items, update) => {\r\n  const index = items.findIndex((item) => item.id === update.id);\r\n\r\n  if (index === -1) {\r\n    return items;\r\n  }\r\n\r\n  return [\r\n    ...items.slice(0, index),\r\n    update,\r\n    ...items.slice(index + 1),\r\n  ];\r\n\r\n};\r\n\r\nconst sortDate = (dateA, dateB)=>{\r\nreturn dayjs(dateA.release.date).diff(dateB.release.date);\r\n};\r\n\r\nconst sortRating = (ratingA, ratingB)=>{\r\n  if(ratingA.total_rating === ratingB.total_rating){\r\n    return 0;\r\n  }\r\n  if(ratingA.total_rating > ratingB.total_rating){\r\n    return 1;\r\n  }\r\n  if(ratingA.total_rating < ratingB.total_rating){\r\n    return -1;\r\n  }\r\n}\r\n\r\nexport {createRandomNumber, createFloatRandomNumber, isEsc, updateItem, sortDate, sortRating};","export const SortType= {\r\nDEFAULT:'DEFAULT',\r\nBY_DATE:'BY_DATE',\r\nBY_RATING:'BY_RATING'\r\n}","const findMostFilms = (movies, mostList)=>{\r\n  let mostMovies = [];\r\n  if(mostList === 'TopRatedFilmsList'){\r\n    mostMovies = movies.slice().sort(function (aComparedData, bComparedData) {\r\n      if (aComparedData.total_rating< bComparedData.total_rating) {\r\n        return 1;\r\n      }\r\n      if (aComparedData.total_rating> bComparedData.total_rating) {\r\n        return -1;\r\n      }\r\n      // a должно быть равным b\r\n      return 0;\r\n    });\r\n  }else{\r\n    mostMovies = movies.slice().sort(function (aComparedData, bComparedData) {\r\n      if (aComparedData.comments.length< bComparedData.comments.length) {\r\n        return 1;\r\n      }\r\n      if (aComparedData.comments.length> bComparedData.comments.length) {\r\n        return -1;\r\n      }\r\n      // a должно быть равным b\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  const mostMoviesList = mostMovies.slice(0,2);\r\n  return mostMoviesList;\r\n}\r\n\r\nexport {findMostFilms};","import AbstractView from \"../view/abstract-view\";\r\nimport { isEsc } from \"./common\";\r\n\r\n\r\nconst RenderPosition = {\r\n  AFTERBEGIN: 'afterbegin',\r\n  BEFOREEND: 'beforeend',\r\n};\r\n\r\nconst render = (container, element, place = RenderPosition.BEFOREEND) => {\r\n  if (element instanceof AbstractView){\r\n    element = element.getElement();\r\n  }\r\n  if(container instanceof AbstractView){\r\n    container = container.getElement();\r\n  }\r\n  switch (place) {\r\n    case RenderPosition.AFTERBEGIN:\r\n      container.prepend(element);\r\n      break;\r\n    case RenderPosition.BEFOREEND:\r\n      container.append(element);\r\n      break;\r\n  }\r\n};\r\n\r\n\r\nconst createElement = (element)=>{\r\n  const newElement = document.createElement('div');\r\n  newElement.innerHTML = element;\r\n  return newElement.firstElementChild;\r\n};\r\nconst replace = (newComponent, prevComponent)=>{\r\n  if(newComponent instanceof AbstractView){\r\n    newComponent = newComponent.getElement();\r\n  }\r\n  if(prevComponent instanceof AbstractView){\r\n    prevComponent = prevComponent.getElement();\r\n  }\r\n  const prevComponentParent = prevComponent.parentElement;\r\n  if (prevComponentParent === null || newComponent === null || prevComponent === null) {\r\n    throw new Error('Can\\'t replace unexisting elements');\r\n  }\r\n  prevComponentParent.replaceChild(newComponent, prevComponent);\r\n}\r\n\r\nconst remove = (component)=>{\r\n  if(!(component instanceof AbstractView)){\r\n    throw new Error('can remove only component')\r\n  }\r\n  component.getElement().remove();\r\n  component.removeElement();\r\n  }\r\nexport {  createElement, RenderPosition, render, isEsc, remove,replace};","import { createElement } from \"../utils/render\";\r\n\r\nexport default class AbstractView{\r\n  constructor(){\r\n    if (new.target === AbstractView) {\r\n      throw new Error('Can\\'t instantiate Abstract class, only concrete one.');\r\n    }\r\n    this._element = null;\r\n    this._callback = {};\r\n  }\r\n  getTemplate(){\r\n    throw new Error('you can\\'t initiate Abstract.getTemplate');\r\n  }\r\n  getElement(){\r\n    if(!this._element){\r\n      this._element = createElement(this.getTemplate())\r\n    }\r\n    return this._element;\r\n  }\r\n  removeElement(){\r\n    this._element = null;\r\n  }\r\n}\r\n","import AbstractView from \"./abstract-view\";\r\nimport { renderFilmCard } from \"../utils/render\";\r\nconst createButtonShowMore = ()=>{\r\n  return `\r\n    <button class=\"films-list__show-more\">Show more</button>\r\n  `;\r\n};\r\n\r\nexport default class ButtonShowMore extends AbstractView{\r\n  constructor(){\r\n    super();\r\n    this._onClickButtonHandler = this._onClickButtonHandler.bind(this);\r\n  }\r\n  getTemplate(){\r\n    return createButtonShowMore();\r\n  }\r\n  _onClickButtonHandler(){\r\n    this._callback.onClickButtonHandler();\r\n  }\r\n  setClickListener(callback){\r\n    this._callback.onClickButtonHandler = callback;\r\n    this.getElement().addEventListener('click', this._onClickButtonHandler);\r\n  }\r\n};","import AbstractView from \"./abstract-view\";\r\n\r\nconst createEmptyList = ()=>{\r\nreturn `\r\n  <section class=\"films-list\">\r\n      <h2 class=\"films-list__title\">There are no movies in our database</h2>\r\n\r\n      <!--\r\n        Значение отображаемого текста зависит от выбранного фильтра:\r\n          * All movies – 'There are no movies in our database'\r\n          * Watchlist — 'There are no movies to watch now';\r\n          * History — 'There are no watched movies now';\r\n          * Favorites — 'There are no favorite movies now'.\r\n      -->\r\n  </section>\r\n  `;\r\n};\r\n\r\nexport default class EmptyList extends AbstractView{\r\n  getTemplate(){\r\n    return createEmptyList();\r\n  }\r\n}","import dayjs from \"dayjs\";\r\nimport AbstractView from \"./abstract-view\";\r\n\r\nconst createFilmCard = (movie)=>{\r\n  const {title, total_rating, poster, description, comments,release, runtime, genres} = movie;\r\n  const commentsNumber = comments.length;\r\n  const releaseYear = dayjs(release.date).format('YYYY');\r\n  const genre = genres[0];\r\n  return `\r\n    <article class=\"film-card\">\r\n      <h3 class=\"film-card__title\">${title}</h3>\r\n      <p class=\"film-card__rating\">${total_rating}</p>\r\n      <p class=\"film-card__info\">\r\n        <span class=\"film-card__year\">${releaseYear}</span>\r\n        <span class=\"film-card__duration\">${runtime}</span>\r\n        <span class=\"film-card__genre\">${genre}</span>\r\n      </p>\r\n      <img src=\"${poster}\" alt=\"${title}\" class=\"film-card__poster\">\r\n      <p class=\"film-card__description\">${description}</p>\r\n      <a class=\"film-card__comments\">${commentsNumber} comments</a>\r\n      <div class=\"film-card__controls\">\r\n        <button class=\"film-card__controls-item film-card__controls-item--add-to-watchlist\" type=\"button\">Add to watchlist</button>\r\n        <button class=\"film-card__controls-item film-card__controls-item--mark-as-watched\" type=\"button\">Mark as watched</button>\r\n        <button class=\"film-card__controls-item film-card__controls-item--favorite\" type=\"button\">Mark as favorite</button>\r\n      </div>\r\n    </article>\r\n  `;\r\n};\r\n\r\nexport default class FilmCard extends AbstractView{\r\n  constructor(film){\r\n    super();\r\n    this._film = film;\r\n    \r\n    this._openPopup = this._openPopup.bind(this);\r\n    this._addToWatchList = this._addToWatchList.bind(this);\r\n    this._markAsWatch = this._markAsWatch.bind(this);\r\n    this._addToFavorite = this._addToFavorite.bind(this);\r\n    //this._checkingStatus();\r\n  };\r\n  getTemplate(){\r\n    return createFilmCard(this._film);\r\n  };\r\n  _openPopup(){\r\n    this._callback.openPopup();\r\n  };\r\n  _addToWatchList(){\r\n    console.log('1111111111111111111111');\r\n    this._callback.addToWatchList();  \r\n   // this._checkingStatus();\r\n  };\r\n  _markAsWatch(){\r\n   \r\n    this._callback.markAsWatch();   \r\n   // this._checkingStatus();\r\n  };\r\n  _addToFavorite(){\r\n   \r\n   // this._checkingStatus();\r\n    this._callback.addToFavorite();\r\n    \r\n  };\r\n  setAddToWatchListHandler(callback){\r\n    this._callback.addToWatchList = callback;\r\n    this.getElement().querySelector('.film-card__controls-item--add-to-watchlist').addEventListener('click',this._addToWatchList);\r\n  };\r\n  setMarkAsWatchHandler(callback){\r\n    this._callback.markAsWatch = callback;\r\n    this.getElement().querySelector('.film-card__controls-item--mark-as-watched').addEventListener('click',this._markAsWatch);\r\n    \r\n  };\r\n  setAddToFavoriteHandler(callback){\r\n    this._callback.addToFavorite = callback;\r\n    this.getElement().querySelector('.film-card__controls-item--favorite').addEventListener('click',this._addToFavorite);\r\n  };\r\n\r\n  setClickListener(callback){\r\n    this._callback.openPopup = callback;\r\n    this.getElement().querySelector('.film-card__title').addEventListener('click',this._openPopup);\r\n    this.getElement().querySelector('.film-card__comments').addEventListener('click',this._openPopup);\r\n    this.getElement().querySelector('.film-card__poster').addEventListener('click',this._openPopup);\r\n  };\r\n  // _checkingStatus(){\r\n  //   console.log('hello');\r\n  //   if(this._film.watchlist){\r\n  //     this.getElement().querySelector('.film-card__controls-item--add-to-watchlist').classList.add('film-card__controls-item--active');\r\n  //     // this._popup.getElement().querySelector('.film-details__control-button--watchlist').classList.add('film-details__control-button--active');\r\n  //   }else{\r\n  //     this.getElement().querySelector('.film-card__controls-item--add-to-watchlist').classList.remove('film-card__controls-item--active');\r\n  //     // this._popup.getElement().querySelector('.film-details__control-button--watchlist').classList.remove('film-details__control-button--active');\r\n  //   }\r\n  //   if(this._film.already_watched){\r\n  //     this.getElement().querySelector('.film-card__controls-item--mark-as-watched').classList.add('film-card__controls-item--active');\r\n  //     // this._popup.getElement().querySelector('.film-details__control-button--watched').classList.add('film-details__control-button--active');\r\n  //   }else{\r\n  //     this.getElement().querySelector('.film-card__controls-item--mark-as-watched').classList.remove('film-card__controls-item--active');\r\n  //     // this._popup.getElement().querySelector('.film-details__control-button--watched').classList.remove('film-details__control-button--active');\r\n  //   }\r\n  //   if(this._film.isFavorite){\r\n  //     this.getElement().querySelector('.film-card__controls-item--favorite').classList.add('film-card__controls-item--active');\r\n  //     // this._popup.getElement().querySelector('.film-details__control-button--favorite').classList.add('film-details__control-button--active');\r\n  //   }else{\r\n  //     this.getElement().querySelector('.film-card__controls-item--favorite').classList.remove('film-card__controls-item--active');\r\n  //     // this._popup.getElement().querySelector('.film-details__control-button--favorite').classList.remove('film-details__control-button--active');\r\n  //   }\r\n  // }\r\n}","import AbstractView from \"./abstract-view\";\r\nconst createFilmSection= ()=>{\r\n  return `\r\n  <section class=\"films\">\r\n \r\n    </section>\r\n  `;\r\n}\r\n\r\nexport default class FilmSection extends AbstractView{\r\n  getTemplate(){\r\n    return createFilmSection();\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\nconst createFilmsListContainer = ()=>{\r\n  return `\r\n    <div class=\"films-list__container\">\r\n\r\n  </div>\r\n   `;\r\n}\r\n\r\nexport default class FilmListContainer extends AbstractView{\r\n  getTemplate(){\r\n    return createFilmsListContainer();\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\n\r\nconst createMostCommentedFilmsList = ()=>{\r\n   return `\r\n    <section class=\"films-list films-list--extra\">\r\n    <h2 class=\"films-list__title\">Most commented</h2>\r\n    \r\n    </section>\r\n  `;\r\n};\r\n\r\nexport default class MostCommentedFilmsList extends AbstractView{\r\n\r\n  getTemplate(){\r\n    return createMostCommentedFilmsList(this._mostCommentedList);\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\n\r\nconst createTopRatedFilmsList = ()=>{\r\n  return `\r\n  <section class=\"films-list films-list--extra\">\r\n  <h2 class=\"films-list__title\">Top rated</h2>\r\n  </section>\r\n  `;\r\n};\r\n\r\nexport default class TopRatedFilmsList extends AbstractView{\r\n  getTemplate(){\r\n    return createTopRatedFilmsList(this._topRatedList);\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\nconst createFilmsList = ()=>{\r\n  return `\r\n    <section class=\"films-list\">\r\n    <h2 class=\"films-list__title visually-hidden\">All movies. Upcoming</h2>\r\n  \r\n    </section>\r\n  `;\r\n}\r\n\r\nexport default class FilmList extends AbstractView{\r\n  getTemplate(){\r\n    return createFilmsList();\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\nconst createMenu = (favoriteMovie)=>{\r\n  return `\r\n  <nav class=\"main-navigation\">\r\n  <div class=\"main-navigation__items\">\r\n    <a href=\"#all\" class=\"main-navigation__item main-navigation__item--active\">All movies</a>\r\n    <a href=\"#watchlist\" class=\"main-navigation__item\">Watchlist <span class=\"main-navigation__item-count\">13</span></a>\r\n    <a href=\"#history\" class=\"main-navigation__item\">History <span class=\"main-navigation__item-count\">4</span></a>\r\n    <a href=\"#favorites\" class=\"main-navigation__item\">Favorites <span class=\"main-navigation__item-count\">${favoriteMovie}</span></a>\r\n  </div>\r\n  <a href=\"#stats\" class=\"main-navigation__additional\">Stats</a>\r\n  </nav>\r\n  `;\r\n};\r\n\r\nexport default class Menu extends AbstractView{\r\n \r\n  getTemplate(){\r\n  return createMenu();\r\n  }\r\n\r\n}","import dayjs from \"dayjs\";\r\nimport AbstractView from \"./abstract-view\";\r\nimport SmartView from \"./smart-view\";\r\nconst createGenresTemplate = (genres)=>{\r\n  //console.log(genres.length);\r\n  return genres.length>1?`\r\n    <td class=\"film-details__term\">Genres</td>\r\n      <td class=\"film-details__cell\">\r\n        <span class=\"film-details__genre\">${genres.join(\", \")}</span>\r\n      </td>`:`\r\n    <td class=\"film-details__term\">Genre</td>\r\n      <td class=\"film-details__cell\">\r\n        <span class=\"film-details__genre\">${genres[0]}</span>\r\n      </td>`\r\n   \r\n};\r\nconst createCommentsList = (comments)=>{\r\n // console.log(comments.comment[0].emotion,'comment');\r\n return comments.comment.map(({emotion, author, comment, date})=>{\r\n    return `<li class=\"film-details__comment\">\r\n    <span class=\"film-details__comment-emoji\">\r\n      <img src=\"./images/emoji/${emotion}.png\" width=\"55\" height=\"55\" alt=\"emoji-${emotion}\">\r\n    </span>\r\n    <div>\r\n      <p class=\"film-details__comment-text\">${comment}</p>\r\n      <p class=\"film-details__comment-info\">\r\n        <span class=\"film-details__comment-author\">${author}</span>\r\n        <span class=\"film-details__comment-day\">${dayjs(date).format('YYYY-MM-DD HH:mm')}</span>\r\n        <button class=\"film-details__comment-delete\">Delete</button>\r\n      </p>\r\n    </div>\r\n  </li>`\r\n  }).join('');\r\n  \r\n}\r\nconst createPopup= (film)=>{\r\n  const {title, age_rating, director, alternative_title, poster, genres, writers, actors, description, total_rating, release, runtime, comments} = film;\r\n\r\n  return `\r\n    <section class=\"film-details\">\r\n      <form class=\"film-details__inner\" action=\"\" method=\"get\">\r\n        <div class=\"film-details__top-container\">\r\n          <div class=\"film-details__close\">\r\n            <button class=\"film-details__close-btn\" type=\"button\">close</button>\r\n          </div>\r\n          \r\n          <div class=\"film-details__info-wrap\">\r\n            <div class=\"film-details__poster\">\r\n              <img class=\"film-details__poster-img\" src=\"${poster}\" alt=\"\">\r\n              <p class=\"film-details__age\">${age_rating}</p>\r\n            </div>\r\n\r\n            <div class=\"film-details__info\">\r\n              <div class=\"film-details__info-head\">\r\n                <div class=\"film-details__title-wrap\">\r\n                  <h3 class=\"film-details__title\">${title}</h3>\r\n                  <p class=\"film-details__title-original\">Original: ${alternative_title}</p>\r\n                </div>\r\n\r\n                <div class=\"film-details__rating\">\r\n                  <p class=\"film-details__total-rating\">${total_rating}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <table class=\"film-details__table\">\r\n                <tr class=\"film-details__row\">\r\n                  <td class=\"film-details__term\">Director</td>\r\n                  <td class=\"film-details__cell\">${director}</td>\r\n                </tr>\r\n                <tr class=\"film-details__row\">\r\n                  <td class=\"film-details__term\">Writers</td>\r\n                  <td class=\"film-details__cell\">${writers.join(', ')}</td>\r\n                </tr>\r\n                <tr class=\"film-details__row\">\r\n                  <td class=\"film-details__term\">Actors</td>\r\n                  <td class=\"film-details__cell\">${actors.join(', ')}</td>\r\n                </tr>\r\n                <tr class=\"film-details__row\">\r\n                  <td class=\"film-details__term\">Release Date</td>\r\n                  <td class=\"film-details__cell\">${release.date.format('DD MMMM YYYY')}</td>\r\n                </tr>\r\n                <tr class=\"film-details__row\">\r\n                  <td class=\"film-details__term\">Runtime</td>\r\n                  <td class=\"film-details__cell\">${runtime}</td>\r\n                </tr>\r\n                <tr class=\"film-details__row\">\r\n                  <td class=\"film-details__term\">Country</td>\r\n                  <td class=\"film-details__cell\">${release.country}</td>\r\n                </tr>\r\n                <tr class=\"film-details__row\">\r\n                  ${createGenresTemplate(genres)}\r\n                </tr>\r\n              </table>\r\n\r\n              <p class=\"film-details__film-description\">\r\n                ${description}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <section class=\"film-details__controls\">\r\n            <button type=\"button\" class=\"film-details__control-button film-details__control-button--watchlist\" id=\"watchlist\" name=\"watchlist\">Add to watchlist</button>\r\n            <button type=\"button\" class=\"film-details__control-button film-details__control-button--watched\" id=\"watched\" name=\"watched\">Already watched</button>\r\n            <button type=\"button\" class=\"film-details__control-button film-details__control-button--favorite\" id=\"favorite\" name=\"favorite\">Add to favorites</button>\r\n          </section>\r\n        </div>\r\n\r\n        <div class=\"film-details__bottom-container\">\r\n          <section class=\"film-details__comments-wrap\">\r\n            <h3 class=\"film-details__comments-title\">Comments <span class=\"film-details__comments-count\"> ${comments.comment.length}</span></h3>\r\n\r\n            <ul class=\"film-details__comments-list\">\r\n             ${createCommentsList(comments)}\r\n              \r\n            </ul>\r\n\r\n            <div class=\"film-details__new-comment\">\r\n              <div class=\"film-details__add-emoji-label\"></div>\r\n\r\n              <label class=\"film-details__comment-label\">\r\n                <textarea class=\"film-details__comment-input\" placeholder=\"Select reaction below and write comment here\" name=\"comment\"></textarea>\r\n              </label>\r\n\r\n              <div class=\"film-details__emoji-list\">\r\n                <input class=\"film-details__emoji-item visually-hidden\" name=\"comment-emoji\" type=\"radio\" id=\"emoji-smile\" value=\"smile\">\r\n                <label class=\"film-details__emoji-label\" for=\"emoji-smile\">\r\n                  <img src=\"./images/emoji/smile.png\" width=\"30\" height=\"30\" alt=\"emoji\">\r\n                </label>\r\n\r\n                <input class=\"film-details__emoji-item visually-hidden\" name=\"comment-emoji\" type=\"radio\" id=\"emoji-sleeping\" value=\"sleeping\">\r\n                <label class=\"film-details__emoji-label\" for=\"emoji-sleeping\">\r\n                  <img src=\"./images/emoji/sleeping.png\" width=\"30\" height=\"30\" alt=\"emoji\">\r\n                </label>\r\n\r\n                <input class=\"film-details__emoji-item visually-hidden\" name=\"comment-emoji\" type=\"radio\" id=\"emoji-puke\" value=\"puke\">\r\n                <label class=\"film-details__emoji-label\" for=\"emoji-puke\">\r\n                  <img src=\"./images/emoji/puke.png\" width=\"30\" height=\"30\" alt=\"emoji\">\r\n                </label>\r\n\r\n                <input class=\"film-details__emoji-item visually-hidden\" name=\"comment-emoji\" type=\"radio\" id=\"emoji-angry\" value=\"angry\">\r\n                <label class=\"film-details__emoji-label\" for=\"emoji-angry\">\r\n                  <img src=\"./images/emoji/angry.png\" width=\"30\" height=\"30\" alt=\"emoji\">\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  `;\r\n};\r\n\r\nexport default class Popup extends SmartView{\r\n  constructor(filmCard){\r\n    super();\r\n    this._filmCard = Popup.parsePointToData(filmCard);\r\n    this._openPopup = this._openPopup.bind(this);\r\n    this._addToWatchList = this._addToWatchList.bind(this);\r\n    this._markAsWatch = this._markAsWatch.bind(this);\r\n    this._addToFavorite = this._addToFavorite.bind(this);\r\n    this._emojiHandler = this._emojiHandler.bind(this);\r\n    this._setInnerHandlers();\r\n    //this._checkingStatus();\r\n  }\r\n  static parsePointToData(filmCard){\r\n    return Object.assign({}, filmCard);\r\n  }\r\n  static parseDataToPoint(data){\r\n    return Object.assign({},data);\r\n  }\r\n  _openPopup(){\r\n    this._callback.openPopup();\r\n  }\r\n  restoreHandlers(){\r\n    this._setInnerHandlers();\r\n    this._openPopup();\r\n    this.setAddToWatchListHandler(this._callback.addToWatchList);\r\n    this.setMarkAsWatchHandler(this._callback.markAsWatch);\r\n    this.setAddToFavoriteHandler(this._callback.addToFavorite);\r\n  }\r\n  setClickPopup(callback){\r\n    this._callback.openPopup = callback;\r\n    this.getElement().querySelector('.film-details__close-btn').addEventListener('click', this._openPopup);\r\n  }\r\n  _setInnerHandlers(){\r\n   // console.log(this._filmCard,'before');\r\n    this.getElement().querySelectorAll('.film-details__emoji-item').forEach((inputEmoji)=>{\r\n      inputEmoji.addEventListener('change',this._emojiHandler);\r\n    });\r\n  }\r\n  _emojiHandler(evt){\r\n    evt.preventDefault();\r\n    console.log(this._filmCard,'fffffffffffffffffffffffffffffffff');\r\n   // console.log(evt.target.value,'target');\r\n    this._filmCard.comments.comment.push({emotion:evt.target.value, author:evt.target.value});\r\n  //   this.getElement().querySelector('.film-details__add-emoji-label').insertAdjacentHTML('afterbegin',`<span class=\"film-details__comment-emoji\">\r\n  //   <img src=\"./images/emoji/${evt.target.value}.png\" width=\"55\" height=\"55\" alt=\"emoji-${evt.target.value}\">\r\n  // </span>`);\r\n   // console.log(this._filmCard,'after');\r\n    this.updateData(this._filmCard.comments.comment);\r\n  }\r\n\r\n  getTemplate(){\r\n \r\n    return createPopup(this._filmCard);\r\n  }\r\n  _addToWatchList(evt){\r\n    //evt.preventDefault();\r\n    this._callback.addToWatchList();  \r\n  };\r\n  _markAsWatch(evt){\r\n    //evt.preventDefault();\r\n    this._callback.markAsWatch();   \r\n  };\r\n  _addToFavorite(evt){\r\n    //evt.preventDefault();\r\n    this._callback.addToFavorite();\r\n  };\r\n  setAddToWatchListHandler(callback){\r\n    this._callback.addToWatchList = callback;\r\n    this.getElement().querySelector('.film-details__control-button--watchlist').addEventListener('click',this._addToWatchList);\r\n  };\r\n  setMarkAsWatchHandler(callback){\r\n    this._callback.markAsWatch = callback;\r\n    this.getElement().querySelector('.film-details__control-button--watched').addEventListener('click',this._markAsWatch);\r\n  };\r\n  setAddToFavoriteHandler(callback){\r\n    this._callback.addToFavorite = callback;\r\n    this.getElement().querySelector('.film-details__control-button--favorite').addEventListener('click',this._addToFavorite);\r\n  };\r\n  _checkingStatus(){\r\n    console.log('hello');\r\n    if(this._filmCard.watchlist){\r\n      // this._filmCard.getElement().querySelector('.film-card__controls-item--add-to-watchlist').classList.add('film-card__controls-item--active');\r\n      this.getElement().querySelector('.film-details__control-button--watchlist').classList.add('film-details__control-button--active');\r\n    }else{\r\n      // this._filmCard.getElement().querySelector('.film-card__controls-item--add-to-watchlist').classList.remove('film-card__controls-item--active');\r\n      this.getElement().querySelector('.film-details__control-button--watchlist').classList.remove('film-details__control-button--active');\r\n    }\r\n    if(this._filmCard.already_watched){\r\n      // this._filmCard.getElement().querySelector('.film-card__controls-item--mark-as-watched').classList.add('film-card__controls-item--active');\r\n      this.getElement().querySelector('.film-details__control-button--watched').classList.add('film-details__control-button--active');\r\n    }else{\r\n      // this._filmCard.getElement().querySelector('.film-card__controls-item--mark-as-watched').classList.remove('film-card__controls-item--active');\r\n      this.getElement().querySelector('.film-details__control-button--watched').classList.remove('film-details__control-button--active');\r\n    }\r\n    if(this._filmCard.isFavorite){\r\n      // this._filmCard.getElement().querySelector('.film-card__controls-item--favorite').classList.add('film-card__controls-item--active');\r\n      this.getElement().querySelector('.film-details__control-button--favorite').classList.add('film-details__control-button--active');\r\n    }else{\r\n      // this._filmCard.getElement().querySelector('.film-card__controls-item--favorite').classList.remove('film-card__controls-item--active');\r\n      this.getElement().querySelector('.film-details__control-button--favorite').classList.remove('film-details__control-button--active');\r\n    }\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\n\r\nexport default class SmartView extends AbstractView{\r\n  constructor(){\r\n    super();\r\n    this._filmCard = {};\r\n  }\r\n  restoreHandlers(){\r\n    throw new Error('can\\'t implement method');\r\n  }\r\n  updateData(updated,flag){\r\n    // if(!updated){\r\n    //   return;\r\n    // }\r\n \r\n    this._filmCard = Object.assign(\r\n      {},\r\n      this._filmCard,\r\n      updated\r\n      )\r\n      // if(flag){\r\n      //   return;\r\n      // }\r\n    this.updateElement();\r\n  }\r\n  updateElement(){\r\n    const oldElement = this.getElement();\r\n    const parent = oldElement.parentElement;\r\n    this.removeElement();\r\n    const newElement = this.getElement();\r\n\r\n    parent.replaceChild(newElement,oldElement);\r\n    this.restoreHandlers();\r\n  }\r\n} ","import AbstractView from \"./abstract-view\";\r\nimport { SortType } from \"../utils/const\";\r\nconst createSortElement = ()=>{\r\n  return `\r\n    <ul class=\"sort\">\r\n    <li><a href=\"#\" class=\"sort__button sort__button--active\" data-sort-type='${SortType.DEFAULT}'>Sort by default</a></li>\r\n    <li><a href=\"#\" class=\"sort__button\" data-sort-type='${SortType.BY_DATE}'>Sort by date</a></li>\r\n    <li><a href=\"#\" class=\"sort__button\" data-sort-type='${SortType.BY_RATING}'>Sort by rating</a></li>\r\n    </ul>\r\n  `;\r\n};\r\n\r\nexport default class SortView extends AbstractView{\r\n  constructor(){\r\n    super();\r\n    this._sortTypeChangeHandler = this._sortTypeChangeHandler.bind(this);\r\n  }\r\n  getTemplate(){\r\n    return createSortElement();\r\n  }\r\n  _sortTypeChangeHandler(evt){\r\n    if(evt.target.tagName !=='A'){\r\n      return;\r\n    }\r\n    console.log(evt.target.dataset.sortType);\r\n    this._callback.handleSortType(evt.target.dataset.sortType);\r\n  }\r\n  setHandleSortType(callback){\r\n    this._callback.handleSortType = callback;\r\n    this.getElement().addEventListener('click', this._sortTypeChangeHandler);\r\n  }\r\n}","import AbstractView from \"./abstract-view\";\r\nconst createUser = ()=>{\r\n  return `\r\n  <section class=\"header__profile profile\">\r\n    <p class=\"profile__rating\">Movie Buff</p>\r\n    <img class=\"profile__avatar\" src=\"images/bitmap@2x.png\" alt=\"Avatar\" width=\"35\" height=\"35\">\r\n  </section>\r\n  `;\r\n};\r\n\r\nexport default class User extends AbstractView{\r\n   getTemplate(){\r\n    return createUser();\r\n  }\r\n}"],"sourceRoot":""}